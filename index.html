<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>餌やりゲーム</title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
        }
        img {
            width: 200px;
            height: 200px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>タップして餌を与えよう！</h1>
    <img id="pet" src="" alt="ペット">
    <p>餌を与えた回数: <span id="count">0</span></p>
    <p>ランク: <span id="rank">初心者</span></p>
    
    <script>
        function getCookie(name) {
            let matches = document.cookie.match(new RegExp("(?:^|; )" + name.replace(/([.$?*|{}()\[\]\\/\\+^])/g, '\\$1') + "=([^;]*)"));
            return matches ? decodeURIComponent(matches[1]) : "";
        }

        function setCookie(name, value, days) {
            let date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            document.cookie = name + "=" + encodeURIComponent(value) + ";expires=" + date.toUTCString() + ";path=/";
        }

        let count = parseInt(getCookie("feedCount")) || 0;
        let petImage = getCookie("petImage") || "pet0.png";
        let rank = getCookie("rank") || "初心者";

        document.getElementById("count").textContent = count;
        document.getElementById("pet").src = petImage;
        document.getElementById("rank").textContent = rank;
        
        function updateRank() {
            let newRank = "初心者";
            let newPetImage = "pet0.png";
            
            if (count >= 600) { newRank = "はと"; newPetImage = "pet8.png"; }
            else if (count >= 500) { newRank = "さくら"; newPetImage = "pet7.png"; }
            else if (count >= 400) { newRank = "はとの死骸"; newPetImage = "pet6.png"; }
            else if (count >= 300) { newRank = "神に選ばれた者"; newPetImage = "pet5.png"; }
            else if (count >= 250) { newRank = "飼育員"; newPetImage = "pet4.png"; }
            else if (count >= 150) { newRank = "猛者"; newPetImage = "pet3.png"; }
            else if (count >= 100) { newRank = "上級者"; newPetImage = "pet2.png"; }
            else if (count >= 50) { newRank = "中級者"; newPetImage = "pet1.png"; }
            
            document.getElementById("rank").textContent = newRank;
            document.getElementById("pet").src = newPetImage;
            setCookie("rank", newRank, 30);
            setCookie("petImage", newPetImage, 30);
        }

        updateRank();
        
        function feedPet() {
            count++;
            document.getElementById("count").textContent = count;
            setCookie("feedCount", count, 30);
            updateRank();
        }

        document.getElementById("pet").addEventListener("click", feedPet);
    </script>
</body>
</html>
